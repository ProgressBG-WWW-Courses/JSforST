"use strict";let hpd=8;let aN=document.querySelectorAll('.themes>article>section');aN.shown=true;let sTN=document.getElementsByClassName('sub_themes');sTN.shown=false;window.onload=function(){init();};function init(){attachEvents();setHours();calcTotalHours();calcTotalDays();calcThemeHours();hideAllNodes(sTN)};function attachEvents(){let titleNodes=document.querySelectorAll('.themes>article>h2, .themes>article h3');for (let i=0; i < titleNodes.length; i++) {let element=titleNodes[i];element.addEventListener( "click", function(){showHideNodes(getNextSiblings(this));});};let toggleThemesNodes=document.querySelectorAll('.toggleThemes');for (let i=0; i < toggleThemesNodes.length; i++) {let element=toggleThemesNodes[i];element.addEventListener( "click", function(){showHideAll( element, aN );});};let tSTN=document.querySelectorAll('.toggleSubThemes');for (let i=0; i < tSTN.length; i++) {let element=tSTN[i];element.addEventListener( "click", function(){showHideAll( element, sTN );});};}function sSTL(){var themesPath='pages/themes';let sTN=document.querySelectorAll(".themes>article>section");for (let i=0, len=sTN.length; i < len ; i++) {let sTID, sTTN, lN;try{sTID=sTN[i].id;sTTN=sTN[i].querySelector("h3");lN=document.createElement('a');lN.setAttribute("title", "slides");lN.href=themesPath + '/' + sTID + '/' + sTID + '.html';lN.innerHTML=sTTN.innerHTML;sTTN.innerHTML='';sTTN.appendChild(lN);}catch(e){console.log(e);}};}function setHours(){let s=document.querySelectorAll(".themes>article>section");for (let i=0, len=s.length; i < len ; i++) {let outNode=document.createElement('span');outNode.className='subThemeHours';outNode.innerHTML=s[i].getAttribute('data-time');s[i].children[0].appendChild(outNode);};}function calcThemeHours(){let themes=document.querySelectorAll(".themes>article");for (let i=0, len=themes.length; i < len ; i++) {let cTH=0;let themeHours=0;let outNode=document.createElement('span');outNode.className='themeHours';themes[i].children[0].appendChild(outNode);let sTHN=themes[i].querySelectorAll(".subThemeHours");for (let i=0, len=sTHN.length; i < len; i++) {themeHours += sTHN[i].childNodes[0].nodeValue*1;}cTH += themeHours;outNode.title="total theme days:" + cTH/hpd;outNode.innerHTML="Theme Hours: " + themeHours;};}function calcTotalHours(){let out_node=document.getElementById("total_hours");let hours_nodes=document.getElementsByClassName("subThemeHours");let total=0;for (let i=0; i < hours_nodes.length; i++) {let t_h=hours_nodes[i].innerHTML*1 || 0; total += t_h;};out_node.innerHTML=total;}function calcTotalDays(){let hours_nodes=document.getElementsByClassName("subThemeHours");let out_node=document.getElementById("total_days");let current_hours=0;let total_days=0;for (let i=0; i < hours_nodes.length; i++) {let t_h=hours_nodes[i].innerHTML*1 || 0; current_hours += t_h;let current_days;current_days=current_hours / hpd;hours_nodes[i].title="current hours:" + current_hours;hours_nodes[i].title += "\n"+"current days:" + current_days;total_days=current_days;};out_node.innerHTML=total_days;}function showHideAll( clicked_node, effected_nodes ){if (effected_nodes.shown) {hideAllNodes(effected_nodes);effected_nodes.shown=false;clicked_node.title='Hide Subtopics';}else{showAllNodes(effected_nodes);effected_nodes.shown=true;clicked_node.title='Show Subtopics';};}function showAllNodes ( effected_nodes){for (let i=0; i < effected_nodes.length; i++) {showNode(effected_nodes[i]);};}function hideAllNodes ( effected_nodes){for (let i=0; i < effected_nodes.length; i++) {hideNode(effected_nodes[i]);};}function showHideNodes(effected_nodes){effected_nodes.forEach( function(effected_node){if ( effected_node.classList.contains("hidden") ){showNode(effected_node);effected_node.previousElementSibling.title='Hide Subtopics';}else {hideNode(effected_node);effected_node.previousElementSibling.title='Show Subtopics';};});}function showNode(effected_node){effected_node.classList.remove("hidden");effected_node.parentElement.getElementsByTagName("h3")[0].title='Hide Subtopics';let a_n=effected_node.parentElement.getElementsByTagName("h3")[0];changeArrow( a_n, 'up');}function hideNode (effected_node) {effected_node.classList.add("hidden");effected_node.parentElement.getElementsByTagName("h3")[0].title='Show Subtopics';let a_n=effected_node.parentElement.getElementsByTagName("h3")[0];changeArrow( a_n, 'down');}function changeArrow ( node, direction ) {if ( direction == 'up' ){node.classList.remove("arrow_down");node.classList.add("arrow_up");}else{node.classList.remove("arrow_up");node.classList.add("arrow_down");};}