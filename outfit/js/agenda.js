"use strict";
let hours_per_day = 8;
let articleNodes = document.querySelectorAll('.themes>article>section');
articleNodes.shown = false;
let subThemesNodes = document.getElementsByClassName('sub_themes');
subThemesNodes.shown = true;
window.onload = function(){init();
}
function init(){attachEvents();setHours();calcTotalHours();calcTotalDays();calcThemeHours();hideAllNodes(subThemesNodes)
}
function attachEvents(){let titleNodes = document.querySelectorAll('.themes>article>h2, .themes>article h3');for (let i = 0; i < titleNodes.length; i++) {let element = titleNodes[i];element.addEventListener( "click", function(){showHideNodes(getNextSiblings(this));});};let toggleThemesNodes = document.querySelectorAll('.toggleThemes');for (let i = 0; i < toggleThemesNodes.length; i++) {let element = toggleThemesNodes[i];element.addEventListener( "click", function(){showHideAll( element, articleNodes );});};let toggleSubThemesNodes = document.querySelectorAll('.toggleSubThemes');for (let i = 0; i < toggleSubThemesNodes.length; i++) {let element = toggleSubThemesNodes[i];element.addEventListener( "click", function(){showHideAll( element, subThemesNodes );});};
}
function setSubThemesLinks(){var themesPath = 'pages/themes';let subThemesNodes = document.querySelectorAll(".themes>article>section");for (let i = 0, len = subThemesNodes.length; i < len ; i++) {let subThemeID, subThemeTitleNode, linkNode;try{subThemeID = subThemesNodes[i].id;subThemeTitleNode = subThemesNodes[i].querySelector("h3");linkNode = document.createElement('a');linkNode.setAttribute("title", "slides");linkNode.href = themesPath + '/' + subThemeID + '/' + subThemeID + '.html';linkNode.innerHTML = subThemeTitleNode.innerHTML;subThemeTitleNode.innerHTML = '';subThemeTitleNode.appendChild(linkNode);}catch(e){console.log(e);}};
}
function setHours(){let sections = document.querySelectorAll(".themes>article>section");for (let i = 0, len = sections.length; i < len ; i++) {let outNode = document.createElement('span');outNode.className = 'subThemeHours';outNode.innerHTML = sections[i].getAttribute('data-time');sections[i].children[0].appendChild(outNode);};
}
function calcThemeHours(){let themes = document.querySelectorAll(".themes>article");for (let i = 0, len = themes.length; i < len ; i++) {let currentThemeHours = 0;let themeHours = 0;let outNode = document.createElement('span');outNode.className = 'themeHours';themes[i].children[0].appendChild(outNode);let subThemeHoursNodes = themes[i].querySelectorAll(".subThemeHours");for (let i = 0, len = subThemeHoursNodes.length; i < len; i++) {themeHours += subThemeHoursNodes[i].childNodes[0].nodeValue*1;}currentThemeHours += themeHours;outNode.title = "total theme days:" + currentThemeHours/hours_per_day;outNode.innerHTML = "Theme Hours: " + themeHours;};}function calcTotalHours(){let out_node = document.getElementById("total_hours");let hours_nodes = document.getElementsByClassName("subThemeHours");let total = 0;for (let i = 0; i < hours_nodes.length; i++) {let theme_hours = hours_nodes[i].innerHTML*1 || 0; total += theme_hours;};out_node.innerHTML = total;}function calcTotalDays(){let hours_nodes = document.getElementsByClassName("subThemeHours");let out_node = document.getElementById("total_days");let current_hours = 0;let total_days = 0;for (let i = 0; i < hours_nodes.length; i++) {let theme_hours = hours_nodes[i].innerHTML*1 || 0; current_hours += theme_hours;let current_days;current_days = current_hours / hours_per_day;hours_nodes[i].title = "current hours:" + current_hours;hours_nodes[i].title += "\n"+"current days:" + current_days;total_days = current_days;};out_node.innerHTML = total_days;}function showHideAll( clicked_node, effected_nodes ){if (effected_nodes.shown) {hideAllNodes(effected_nodes);effected_nodes.shown = false;clicked_node.title = 'Hide Subtopics';}else{showAllNodes(effected_nodes);effected_nodes.shown = true;clicked_node.title = 'Show Subtopics';};}function showAllNodes ( effected_nodes){for (let i = 0; i < effected_nodes.length; i++) {showNode(effected_nodes[i]);};}function hideAllNodes ( effected_nodes){for (let i = 0; i < effected_nodes.length; i++) {hideNode(effected_nodes[i]);};}function showHideNodes(effected_nodes){effected_nodes.forEach( function(effected_node){if ( effected_node.classList.contains("hidden") ){showNode(effected_node);effected_node.previousElementSibling.title = 'Hide Subtopics';}else {hideNode(effected_node);effected_node.previousElementSibling.title = 'Show Subtopics';};});}function showNode(effected_node){effected_node.classList.remove("hidden");effected_node.parentElement.getElementsByTagName("h3")[0].title = 'Hide Subtopics';let arr_node = effected_node.parentElement.getElementsByTagName("h3")[0];changeArrow( arr_node, 'up');}function hideNode (effected_node) {effected_node.classList.add("hidden");effected_node.parentElement.getElementsByTagName("h3")[0].title = 'Show Subtopics';let arr_node = effected_node.parentElement.getElementsByTagName("h3")[0];changeArrow( arr_node, 'down');}function changeArrow ( node, direction ) {if ( direction == 'up' ){node.classList.remove("arrow_down");node.classList.add("arrow_up");}else{node.classList.remove("arrow_up");node.classList.add("arrow_down");};}